<div class="card">
    <p-table [value]="users" [responsive]="true" [tableStyle]="{'min-width': '60rem'}">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                <p-button (click)="getUsers()" icon="material-symbols-rounded refresh"></p-button>
                <p-button routerLink="new">
                    <ng-template pTemplate="icon">
                        <span class="material-symbols-rounded">
                            add
                        </span>
                    </ng-template>
                </p-button>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="id">ID <p-sortIcon field="id"></p-sortIcon></th>
                <th>Usuario</th>
                <th>Nombre</th>
                <th>CÃ³digo</th>
                <th>Email</th>
                <th>Rol</th>
                <th>Acciones</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-users>
            <tr>
                <td>{{users.id}}</td>
                <td>{{users.username}}</td>
                <td>{{users.fullName}}</td>
                <td>{{users.studentCode}}</td>
                <td>{{users.email}}</td>
                <td class="w-2">
                    <div class=" flex gap-3">
                        <div *ngFor="let role of users.roles">
                            <p-tag *ngIf="role.name == 'admin'" [class]="role" [style]="{ 'background-color': 'var(--cyan-600)'}">{{role.name | capitalize}}</p-tag>
                            <p-tag *ngIf="role.name == 'user'" [class]="role" [style]="{ 'background-color': 'var(--bluegray-600)'}">{{role.name | capitalize}}</p-tag>
                            <p-tag *ngIf="role.name == 'moderator'" [class]="role" [style]="{ 'background-color': 'var(--red-600)'}">{{role.name | capitalize}}</p-tag>
                        </div>
                    </div>
                </td>
                <td class="w-1">
                    <div class="flex gap-7">
                        
                        <p-button [routerLink]="['edit', users.id]">
                            <ng-template pTemplate="icon">
                                <span class="material-symbols-rounded">
                                    edit
                                </span>
                            </ng-template>
                        </p-button>
                        <p-button (click)="deleteUser(users)" [style]="{ 'background-color': 'var(--red-500)', 'border':'none'}">
                            <ng-template pTemplate="icon">
                                <span class="material-symbols-rounded">
                                    delete
                                </span>
                            </ng-template>
                        </p-button>
                    </div>
                    
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary">
            <div class="flex align-items-center justify-content-between">
                En total hay {{users ? users.length : 0 }} usuarios.
            </div>
        </ng-template>
    </p-table>
</div>
<p-toast></p-toast>
<p-confirmDialog [style]="{width: 'auto', height: 'auto'}" acceptLabel="Eliminar" acceptIcon="material-symbols-rounded delete_forever" rejectLabel="Cancelar" acceptButtonStyleClass="p-button-danger" rejectIcon="material-symbols-rounded close" defaultFocus="reject"></p-confirmDialog>